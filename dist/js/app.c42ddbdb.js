(function(t){function e(e){for(var r,a,l=e[0],i=e[1],s=e[2],f=0,h=[];f<l.length;f++)a=l[f],o[a]&&h.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);c&&c(e);while(h.length)h.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var t,e=0;e<u.length;e++){for(var n=u[e],r=!0,l=1;l<n.length;l++){var i=n[l];0!==o[i]&&(r=!1)}r&&(u.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={app:0},u=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=e,l=l.slice();for(var s=0;s<l.length;s++)e(l[s]);var c=i;u.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"001c":function(t,e,n){"use strict";var r=n("ab98"),o=n.n(r);o.a},"176f":function(t,e,n){"use strict";n.r(e);var r,o,u={install:function(t,e){return t.component("authForm",t.extend(n("6a0d").default))}},a=u,l=n("2877"),i=Object(l["a"])(a,r,o,!1,null,null,null);e["default"]=i.exports},"1e01":function(t,e,n){"use strict";var r;n.r(e),r=n("2b0e").default;var o,u,a=new r,l=a,i=n("2877"),s=Object(i["a"])(l,o,u,!1,null,null,null);e["default"]=s.exports},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c");var r,o,u=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("authForm",{attrs:{eventBus:t.eventBus,oauth2:t.oauth2}}),n("b-navbar",[null==t.token?n("b-button",{on:{click:function(e){t.getToken()}}},[t._v("login "+t._s(t.error))]):t._e(),null!=t.token?n("b-button",{on:{click:function(e){t.logout()}}},[t._v("logout "+t._s(t.token))]):t._e()],1)],1)},l=[];r=n("2b0e").default,r.use(n("9f7b").default),r.use(n("176f").default),o=n("1e01").default;var i={data:function(){return{token:null,error:null,eventBus:o,oauth2:{url:"https://app.ogcio.gov.hk/auth/oauth2/authorize/",client:"3TJ1GWZKUgXADslxXcdWQeipIvniayX0C7AKXNjG",scope:"User",response_type:"token"}}},methods:{getToken:function(){return this.eventBus.$emit("oauth2.getToken")},logout:function(){return this.token=null,this.eventBus.$emit("oauth2.logout")}},created:function(){var t=this;return this.eventBus.$on("oauth2.token",function(e){return t.token=e,t.error=null}).$on("oauth2.error",function(e){return t.token=null,t.error=e})}},s=i,c=n("2877"),f=Object(c["a"])(s,a,l,!1,null,null,null),h=f.exports;u["default"].config.productionTip=!1,new u["default"]({render:function(t){return t(h)}}).$mount("#app")},"6a0d":function(t,e,n){"use strict";n.r(e);var r,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{size:"lg","hide-header":"","hide-footer":""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("iframe",{attrs:{id:"authForm"}})])},u=[];n("386d");r=n("2b0e").default,r.use(n("9f7b").default);var a={props:["eventBus","oauth2"],data:function(){return{token:null,error:null,show:!1}},methods:{authUrl:function(){var t,e,r,o,u,a;t=n("0b16");var l=this.oauth2;return a=l.url,e=l.client,u=l.scope,o=l.response_type,r=t.format({query:{client_id:e,scope:u,response_type:o}}),"".concat(a).concat(r)},postParent:function(){var t,e,n,r,o;if(e=new URLSearchParams(null!=(n=location.hash)?n.slice(1):void 0),o=new URLSearchParams(null!=(r=location.search)?r.slice(1):void 0),t={access_token:e.get("access_token"),error:o.get("error")},null!=t.access_token||null!=t.error)return window.parent.postMessage({type:"oauth2",data:t},location.origin)},getToken:function(){return null!=this.token?this.eventBus.$emit("oauth2.token",this.token):(document.getElementById("authForm").src=this.authUrl(),this.show=!0)},logout:function(){return this.token=null}},created:function(){var t=this;return this.eventBus.$on("oauth2.getToken",function(){return t.getToken()}).$on("oauth2.logout",function(){return t.logout()}),this.postParent(),window.addEventListener("message",function(e){var n,r,o=e.data;if(r=o.type,n=o.data,"oauth2"===r)return t.error=n.error,t.token=n.access_token,null!=t.error&&t.eventBus.$emit("oauth2.error",t.error),null!=t.token&&t.eventBus.$emit("oauth2.token",t.token),t.show=!1})}},l=a,i=(n("001c"),n("2877")),s=Object(i["a"])(l,o,u,!1,null,null,null);e["default"]=s.exports},ab98:function(t,e,n){}});
//# sourceMappingURL=app.c42ddbdb.js.map